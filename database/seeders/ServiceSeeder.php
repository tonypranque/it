<?php

namespace Database\Seeders;

use App\Models\Service;
use Illuminate\Database\Seeder;
use Illuminate\Support\Str;

class ServiceSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Корневые услуги
        $rootServices = [
            [
                'title' => 'IT-аутсорсинг и поддержка',
                'excerpt' => 'Комплексное обслуживание компьютеров, оргтехники и программного обеспечения для вашего бизнеса.',
                'content' => '<p>Полный спектр услуг по аутсорсингу IT-инфраструктуры для вашего бизнеса. Мы берем на себя все задачи по технической поддержке, обслуживанию оборудования и программного обеспечения.</p>
                <p><strong>Что входит в услугу:</strong></p>
                <ul>
                    <li>Техническая поддержка пользователей (Helpdesk)</li>
                    <li>Обслуживание компьютеров и серверов</li>
                    <li>Администрирование операционных систем Windows/macOS</li>
                    <li>Обслуживание офисной техники (принтеры, МФУ, сканеры)</li>
                    <li>Управление лицензиями программного обеспечения</li>
                    <li>Резервное копирование и восстановление данных</li>
                </ul>',
                'icon' => 'heroicon-o-computer-desktop',
                'order' => 1,
            ],
            [
                'title' => 'Сетевые решения',
                'excerpt' => 'Создание и администрирование IT-инфраструктуры, настройка сетей и IP-телефонии.',
                'content' => '<p>Проектирование, внедрение и поддержка сетевой инфраструктуры любого уровня сложности. От локальной сети офиса до корпоративной сети с распределенными филиалами.</p>
                <p><strong>Наши услуги:</strong></p>
                <ul>
                    <li>Проектирование и монтаж локальных сетей</li>
                    <li>Настройка сетевого оборудования (Cisco, Mikrotik, Ubiquiti)</li>
                    <li>Внедрение Wi-Fi решений нового поколения</li>
                    <li>Настройка IP-телефонии и VoIP</li>
                    <li>Сетевая безопасность и мониторинг</li>
                    <li>VPN и удаленный доступ</li>
                </ul>',
                'icon' => 'heroicon-o-wifi',
                'order' => 2,
            ],
            [
                'title' => 'Серверное администрирование',
                'excerpt' => 'Настройка, обслуживание и поддержка серверов, включая решения для 1С.',
                'content' => '<p>Профессиональное администрирование серверного оборудования и серверных приложений. Обеспечиваем стабильную работу критически важных сервисов вашей компании.</p>
                <p><strong>Что мы предлагаем:</strong></p>
                <ul>
                    <li>Установка и настройка серверных ОС (Windows Server, Linux)</li>
                    <li>Администрирование Active Directory и доменной инфраструктуры</li>
                    <li>Настройка и поддержка серверов 1С</li>
                    <li>Виртуализация (VMware, Hyper-V)</li>
                    <li>Мониторинг и оптимизация производительности</li>
                    <li>Обновление и патчинг серверного ПО</li>
                </ul>',
                'icon' => 'heroicon-o-server',
                'order' => 3,
            ],
            [
                'title' => 'IT-безопасность и восстановление',
                'excerpt' => 'Аудит, антивирусная защита, резервное копирование и восстановление данных.',
                'content' => '<p>Комплексные решения по обеспечению информационной безопасности и защите данных. Защищаем ваш бизнес от киберугроз и обеспечиваем восстановление в случае инцидентов.</p>
                <p><strong>Наши услуги по безопасности:</strong></p>
                <ul>
                    <li>Аудит информационной безопасности</li>
                    <li>Внедрение антивирусных решений (Kaspersky, Dr.Web)</li>
                    <li>Настройка фаерволов и систем предотвращения вторжений</li>
                    <li>Резервное копирование и восстановление данных (Veeam)</li>
                    <li>Видеонаблюдение и физическая безопасность</li>
                    <li>Обучение сотрудников основам ИБ</li>
                </ul>',
                'icon' => 'heroicon-o-shield-check',
                'order' => 4,
            ],
            [
                'title' => '1С: Поддержка и внедрение',
                'excerpt' => 'Внедрение, обновление и сопровождение решений 1С для оптимизации бизнес-процессов.',
                'content' => '<p>Полный цикл работ по внедрению, сопровождению и развитию решений 1С в вашей компании. Помогаем автоматизировать бизнес-процессы и повысить эффективность работы.</p>
                <p><strong>Что мы делаем:</strong></p>
                <ul>
                    <li>Внедрение типовых и нестандартных конфигураций 1С</li>
                    <li>Обновление и миграция баз данных</li>
                    <li>Настройка пользовательских прав и ролей</li>
                    <li>Интеграция 1С с другими системами</li>
                    <li>Техническая поддержка и консультации</li>
                    <li>Обучение пользователей</li>
                </ul>',
                'icon' => 'heroicon-o-cog',
                'order' => 5,
            ],
        ];

        // Создаем корневые услуги
        $createdServices = [];
        foreach ($rootServices as $serviceData) {
            $service = Service::create(array_merge($serviceData, [
                'slug' => Str::slug($serviceData['title']),
                'is_published' => true,
            ]));

            $createdServices[] = $service;
        }

        // Подуслуги для IT-аутсорсинга
        $outsourcingSubServices = [
            [
                'title' => 'Абонентское обслуживание',
                'excerpt' => 'Постоянное техническое обслуживание IT-инфраструктуры по фиксированной абонентской плате.',
                'content' => '<p>Ежемесячное обслуживание IT-инфраструктуры по предоплаченному тарифу. Полная прозрачность и предсказуемость расходов.</p>',
                'order' => 1,
            ],
            [
                'title' => 'Выезд специалиста',
                'excerpt' => 'Оперативный выезд инженера для решения срочных задач на месте.',
                'content' => '<p>Быстрое реагирование и выезд специалиста в течение 2 часов для решения критических задач.</p>',
                'order' => 2,
            ],
            [
                'title' => 'Дистанционная поддержка',
                'excerpt' => 'Удаленная помощь специалистов через интернет в режиме реального времени.',
                'content' => '<p>Быстрая помощь специалистов без выезда на место. Решение большинства задач дистанционно.</p>',
                'order' => 3,
            ],
        ];

        // Создаем подуслуги для первой услуги
        foreach ($outsourcingSubServices as $index => $subServiceData) {
            Service::create(array_merge($subServiceData, [
                'slug' => Str::slug($subServiceData['title']),
                'parent_id' => $createdServices[0]->id,
                'is_published' => true,
                'icon' => 'heroicon-o-cog',
            ]));
        }

        // Подуслуги для сетевых решений
        $networkSubServices = [
            [
                'title' => 'Проектирование сетей',
                'excerpt' => 'Разработка архитектуры сетевой инфраструктуры под ваши задачи.',
                'content' => '<p>Профессиональное проектирование сетевой инфраструктуры с учетом всех требований бизнеса.</p>',
                'order' => 1,
            ],
            [
                'title' => 'Настройка Wi-Fi',
                'excerpt' => 'Внедрение беспроводных сетей нового поколения Wi-Fi 6.',
                'content' => '<p>Настройка и оптимизация беспроводных сетей для максимальной производительности.</p>',
                'order' => 2,
            ],
        ];

        // Создаем подуслуги для сетевых решений
        foreach ($networkSubServices as $index => $subServiceData) {
            Service::create(array_merge($subServiceData, [
                'slug' => Str::slug($subServiceData['title']),
                'parent_id' => $createdServices[1]->id,
                'is_published' => true,
                'icon' => 'heroicon-o-wifi',
            ]));
        }

        $this->command->info('Услуги успешно созданы!');
    }
}
